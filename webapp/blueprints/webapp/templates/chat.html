{% extends "base.html" %}
{% block title %}Chat{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ url_for('webapp.static',filename='styles/chat.css') }}"/> {% endblock %}
{% block content %}

    <div class="chat-wrapper">
        <div class="chat-container">
            {% for message in messages %}
                <div class="message right">
                    {{ message.message }}
                </div>
                {% if message.response is not none %}
                    <div class="message left">
                        {{ message.response }}
                    </div>
                {% endif %}
            {% endfor %}
        </div>

        {% set conversation_id = request.path.split("/")[-1] %}

        <div class="chat-input-container">
            <label class="btn size-min-content" for="documentInput">
                <img src="{{ url_for('webapp.static',filename='icons/add_file.svg') }}" alt="" width="24"
                     height="24">
            </label>
            <input class=" hidden" id="documentInput" type="file" name="files" accept="application/pdf"
                   data-url="{{ url_for('webapp.documents.upload', conversation_id=conversation_id) }}" multiple required>
            <form action="{{ url_for('webapp.chat.send',conversation_id=conversation_id) }}" id="messageInput"
                  class="chat-input-area">
                <textarea class="text-input" placeholder="Type your message here" required></textarea>
                <button type="submit">Send</button>
            </form>
        </div>
    </div>

    {% include 'chat_file_list.html' %}

    <script src="{{ url_for('webapp.static', filename='scripts/chatHandler.js') }}"></script>
{% endblock %}